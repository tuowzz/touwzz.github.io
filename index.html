# สร้าง Landing Page ใหม่: ยิง Facebook Pixel 'Purchase' เฉพาะเมื่อคลิกปุ่ม
pixel_id = "127978927946856"
tiktok_link = "https://vt.tiktok.com/ZShcWN8p6"

html_with_button = f"""
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>รับของขวัญจาก TikTok</title>

  <!-- Facebook Pixel -->
  <script>
    !function(f,b,e,v,n,t,s)
    {{if(f.fbq)return;n=f.fbq=function(){{n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)}};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}}
    (window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    
    fbq('init', '{pixel_id}');
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id={pixel_id}&ev=PageView&noscript=1"/>
  </noscript>

  <style>
    body {{
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: sans-serif;
      background-color: #fff9f0;
      margin: 0;
    }}
    .container {{
      text-align: center;
    }}
    h1 {{
      font-size: 24px;
      color: #333;
      margin-bottom: 20px;
    }}
    .btn {{
      background-color: #fe2c55;
      color: white;
      border: none;
      padding: 14px 28px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
    }}
    .btn:hover {{
      background-color: #e4003b;
    }}
  </style>
</head>
<body>
  <div class="container">
    <h1>รับของขวัญพิเศษจาก TikTok วันนี้!</h1>
    <a href="{tiktok_link}" class="btn" onclick="fbq('track', 'Purchase', {{value: 0.00, currency: 'THB'}});">
      คลิกเพื่อรับสิทธิ์
    </a>
  </div>
</body>
</html>
"""

# Save to file
button_html_path = "/mnt/data/tiktok_purchase_on_click/index.html"
os.makedirs("/mnt/data/tiktok_purchase_on_click", exist_ok=True)
with open(button_html_path, "w", encoding="utf-8") as f:
    f.write(html_with_button)

# Zip it
button_zip_path = "/mnt/data/tiktok_purchase_event_on_click.zip"
with ZipFile(button_zip_path, 'w') as zipf:
    zipf.write(button_html_path, arcname="index.html")

button_zip_path
